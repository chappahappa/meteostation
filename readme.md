# MeteoStation üå§Ô∏è

–ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –±–∞–∑–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ **NodeMCU ESP32** —Å –¥–∞—Ç—á–∏–∫–æ–º **SHT21**. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: –ø—Ä–æ—à–∏–≤–∫–∏ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –∏—Ö –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

![–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø—Ä–æ–µ–∫—Ç–∞](images/meteo-station.jpg)

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:** –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é –¥–∞—Ç—á–∏–∫–∞ SHT21
- **–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ Wi-Fi
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞ Node.js —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLite –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ React –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
meteostation/
‚îú‚îÄ‚îÄ embedded/              # –ü—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è ESP32 (PlatformIO)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ .pio/
‚îÇ   ‚îú‚îÄ‚îÄ .vscode/
‚îÇ   ‚îî‚îÄ‚îÄ platformio.ini
‚îú‚îÄ‚îÄ backend/               # –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Node.js/Express + SQLite)
‚îÇ   ‚îú‚îÄ‚îÄ server.js          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ package-lock.json
‚îÇ   ‚îú‚îÄ‚îÄ sensor_data.db     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ frontend/              # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Create React App)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ package-lock.json
‚îÇ   ‚îú‚îÄ‚îÄ .env               # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ images/                # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ meteo-station.jpg
‚îî‚îÄ‚îÄ README.md
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è ESP32 (–ü–∞–ø–∫–∞ `embedded`)

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º —Ç—Ä–µ–±—É–µ—Ç—Å—è PlatformIO.

1.  –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `embedded` –≤ VS Code —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PlatformIO
2.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Wi-Fi –∏ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ñ–∞–π–ª–µ `src/main.cpp`:
    ```cpp
    const char* ssid = "–í–ê–®_SSID";
    const char* password = "–í–ê–®_–ü–ê–†–û–õ–¨";
    const char* serverUrl = "http://IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê:3000/data";
    ```
3.  –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–∞—Ç—á–∏–∫ SHT21 –∫ ESP32 –ø–æ I2C (–æ–±—ã—á–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã SDA - GPIO21, SCL - GPIO22)
4.  –ü—Ä–æ—à–µ–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∏—Å–ø–æ–ª—å–∑—É—è –∫–Ω–æ–ø–∫—É `Upload` –≤ PlatformIO

### 2. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (–ü–∞–ø–∫–∞ `backend`)

1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É `backend`
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    npm install
    ```
3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
    ```bash
    npm start
    ```
    –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000 (http://localhost:3000)

### 3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ü–∞–ø–∫–∞ `frontend`)

1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É `frontend`
2.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –°–æ–∑–¥–∞–π—Ç–µ/–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:
    ```env
    REACT_APP_API_BASE_URL=http://localhost:3000
    ```
3.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    npm install
    ```
4.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
    ```bash
    npm start
    ```
    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:3001

## üåê API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

| –ú–µ—Ç–æ–¥      | Endpoint            | –û–ø–∏—Å–∞–Ω–∏–µ                             | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                                     |
| ---------- | ------------------- | ------------------------------------ | --------------------------------------------- |
| **POST**   | `/data`             | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–∞          | `temperature`, `humidity`, `timestamp` (–æ–ø—Ü.) |
| **GET**    | `/data`             | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π        | `period`, `page`, `limit`                     |
| **GET**    | `/data/chart`       | –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) | `period`, `aggregate`                         |
| **GET**    | `/stats`            | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∞–Ω–Ω—ã–º                 | `period`                                      |
| **GET**    | `/data/:id`         | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏          | -                                             |
| **PUT**    | `/data/:id`         | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏                    | `temperature`, `humidity`, `timestamp`        |
| **DELETE** | `/data/:id`         | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏                      | -                                             |
| **POST**   | `/data/bulk-delete` | –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ                    | `ids[]`                                       |
| **GET**    | `/health`           | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏           | -                                             |

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü–µ—Ä–∏–æ–¥—ã (period):**

- `hour` - –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
- `day` - –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- `week` - –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
- `month` - –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
- `all` - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ê–≥—Ä–µ–≥–∞—Ü–∏—è (aggregate):**

- `minute` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–∏–Ω—É—Ç–∞–º
- `hour` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —á–∞—Å–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `day` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–Ω—è–º

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```
# –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
GET http://localhost:3000/data?period=day&page=1&limit=10

# –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —á–∞—Å–∞–º
GET http://localhost:3000/data/chart?period=week&aggregate=hour

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –º–µ—Å—è—Ü
GET http://localhost:3000/stats?period=month

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
POST http://localhost:3000/data
Content-Type: application/json

{
  "temperature": 23.5,
  "humidity": 45.2
}
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å (Embedded):** C++, PlatformIO, Framework Arduino (–¥–ª—è ESP32)
- **–î–∞—Ç—á–∏–∫:** SHT21 (Temperature & Humidity)
- **–ë—ç–∫–µ–Ω–¥ (Backend):** Node.js, Express.js, SQLite
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥ (Frontend):** React, Create React App

## üåê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Frontend)

–í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `.env` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- `REACT_APP_API_URL` - URL –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä–∞

## ü§ù –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–í–æ–∑–º–æ–∂–Ω—ã–µ –∏–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ (–¥–∞–≤–ª–µ–Ω–∏–µ, –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞).
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–æ–≤–µ—â–µ–Ω–∏–π (e-mail, Telegram) –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–Ω–∞—á–µ–Ω–∏–π –∑–∞ –∑–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (Over-The-Air) –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ ESP32.
- –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º, –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤.

---

**–ê–≤—Ç–æ—Ä:** Maks Rygaev

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issue –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
